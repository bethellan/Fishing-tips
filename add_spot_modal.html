<!-- Add Spot / Amenity Modal -->
<div id="addSpotModal" style="display:none; position:fixed; inset:0; background:rgba(0,0,0,0.5); z-index:10000;">
  <div style="max-width:560px; margin:5vh auto; background:#fff; border-radius:8px; padding:16px;">
    <div style="display:flex; justify-content:space-between; align-items:center;">
      <h3 style="margin:0;">Add to Database</h3>
      <button id="addSpotCloseBtn" aria-label="Close" onclick="document.getElementById('addSpotModal').style.display='none'">✕</button>
    </div>

    <p id="addSpotLocationLabel" style="margin-top:8px; color:#333;"></p>

    <label>
      Type:
      <select id="entryType">
        <option value="spot">Fishing Spot</option>
        <option value="amenity">Amenity (food, bait, toilets, parking)</option>
      </select>
    </label>

    <div style="display:flex; gap:8px; margin-top:8px;">
      <label style="flex:1;">Name <input id="entryName" type="text" placeholder="Seatoun Wharf – NE corner" style="width:100%;"></label>
      <label style="flex:1;">Region
        <select id="entryRegion">
          <option>Wellington Harbour</option>
          <option>South Coast (Miramar–Seatoun)</option>
          <option>Kapiti Coast</option>
          <option>West Coast (Foxton–Ōtaki)</option>
          <option>Other</option>
        </select>
      </label>
    </div>

    <div id="spotFields" style="margin-top:8px;">
      <label>Suggested Species<br>
        <input id="entrySpecies" type="text" placeholder="Kahawai, Trevally, John Dory">
      </label>
      <div style="display:flex; gap:8px; margin-top:8px;">
        <label style="flex:1;">Best Tide<br><input id="entryTide" type="text" placeholder="incoming, high"></label>
        <label style="flex:1;">Best Times<br><input id="entryTimes" type="text" placeholder="dawn, dusk, night"></label>
      </div>
      <div style="display:flex; gap:8px; margin-top:8px;">
        <label style="flex:1;">Recommended Rigs<br><input id="entryRigs" type="text" placeholder="ledger, running, sliding"></label>
        <label style="flex:1;">Best Baits<br><input id="entryBaits" type="text" placeholder="pilchard, crab, live piper"></label>
      </div>
      <label style="margin-top:8px; display:block;">Notes<br>
        <textarea id="entryNotes" rows="3" style="width:100%;"></textarea>
      </label>
    </div>

    <div id="amenityFields" style="display:none; margin-top:8px;">
      <label>Amenity Category
        <select id="amenityCategory">
          <option value="takeaway">Takeaway</option>
          <option value="baitshop">Bait Shop</option>
          <option value="toilet">Public Toilet</option>
          <option value="parking">Parking</option>
          <option value="dairy">Dairy</option>
          <option value="cafe">Cafe</option>
          <option value="other">Other</option>
        </select>
      </label>
      <label style="margin-top:8px; display:block;">Notes<br>
        <textarea id="amenityNotes" rows="3" style="width:100%;"></textarea>
      </label>
    </div>

    <div style="display:flex; justify-content:space-between; align-items:center; margin-top:12px;">
      <div>
        <button id="exportPendingBtn" onclick="window.AppPatch && AppPatch.exportPendingData && AppPatch.exportPendingData()">Export Pending JSON</button>
      </div>
      <div>
        <button id="saveEntryBtn" style="background:#0a7; color:#fff; padding:8px 12px; border-radius:6px;">Save</button>
      </div>
    </div>
  </div>
</div>

<script>
(function(){
  const typeSel = document.getElementById('entryType');
  const spotFields = document.getElementById('spotFields');
  const amenityFields = document.getElementById('amenityFields');
  typeSel.addEventListener('change', () => {
    const isSpot = typeSel.value === 'spot';
    spotFields.style.display = isSpot ? 'block' : 'none';
    amenityFields.style.display = isSpot ? 'none' : 'block';
  });
})();
</script>
